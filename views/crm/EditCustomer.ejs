<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">

    <title>Edit Customer</title>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

    <script>
        function edit() {
            var customer = {
                fname: $('#fname').val(),
                lname: $('#sname').val(),
                workaddress: $('#work').val(),
                DOB: $('#DoB').val(),
                homeaddress: $('#home').val(),
                phone: $('#phone').val(),
                gender: $('#gender').val(),
                ssn: $('#id').val()
            }
            $.post("/crm/editCustomer/<%= customer.id %>", customer, (res, status) => {
                if (status === "success") {
                    window.location = "/crm/customerList"
                }
            })
        }
    </script>
    <style>
        a {
            color: #555
        }
        a:hover {
            color: black
        }
    </style>
</head>

<body style="height:100vh">
    <div class="d-flex flex-row">
        <nav class="nav navbar navbar-light bg-light flex-column" 
        style="height:100vh;width: 250px;justify-content: start;align-items: flex-start;" >
            <a class="navbar-brand mx-auto">
                Chiang Mai Bank
            </a>
            <hr style="height:1px;width:90%;;background: black" class="mx-auto">
            <a class="ml-auto mr-0 nav-link" href="/crm/createCustomer">Create Customer</a>
            <a class="ml-auto mr-0 nav-link" href="/crm/customerList">Customer List</a>
            <a class="ml-auto mr-0 nav-link" href="/crm/createLoan">Create Loan</a>
            <a class="ml-auto mr-0 nav-link" href="/crm/loanList">Loan List</a>
            <a class="ml-auto mr-0 nav-link" href="/crm/DoW">Deposit/Withdtaw</a>
        </nav>
        <div class="container">
            <h2 class="mt-3">Edit Customer Information</h2>
            <form class="mt-4" action="#" method="GET"  onsubmit="edit()">
                <div class="form-row mt-3">
                    <div class="col-6">
                        <label class="ml-3" for="fname">Firstname</label>
                        <input type="text" style="width: 300px" class="form-control mt-auto" id="fname" placeholder="Firstname" value="<%= customer.fname %>" required>
                    </div>
                    <div class="col-6">
                        <label class="ml-3" for="sname">Surname</label>
                        <input type="text" style="width: 300px" class="form-control mt-auto" id="sname" placeholder="Surname" value="<%= customer.lname %>" required>
                    </div>
                </div>
                <div class="form-row mt-3">
                    <div class="col-6">
                        <label class="ml-3" for="DoB">Date of birth</label>
                        <input type="date" class="form-control"  style="width:300px;" id="DoB" value="<%= customer.DOB %>" required>
                    </div>
                    <div class="col-6">
                        <label class="ml-3">Gender</label>
                        <select class="form-control" id="gender" style="width: 100px" required>
                            <option value="0" <%= (customer.gender)?"":"selected" %>>Male</option>
                            <option value="1" <%= (customer.gender)?"selected":"" %>>Female</option>
                        </select>
                    </div>
                </div>
                <div class="form-row mt-3">
                    <div class="col-6">
                        <label class="ml-3" for="phone">Phone</label>
                        <input type="text" maxlenght="10" style="width: 300px" class="form-control mt-auto" id="phone" placeholder="Phone" value="<%= customer.phone %>" required>
                    </div>
                    <div class="col-6">
                        <label class="ml-3" for="id">ID</label>
                        <input type="text" maxlength="13" style="width: 300px" class="form-control mt-auto" id="id" placeholder="ID" value="<%= customer.ssn %>" required>
                    </div>
                </div>
                <div class="form-group mt-3">
                    <label class="ml-3" for="home">Home address</label>
                    <textarea class="form-control col-9" id="home" rows="3" placeholder="Home address" required><%= customer.homeaddress %></textarea>
                </div>
                <div class="form-group mt-3">
                    <label class="ml-3" for="work">Work address</label>
                    <textarea class="form-control col-9" id="work" rows="3" placeholder="Work address" required><%= customer.workaddress %></textarea>
                </div>
                <div class="form-row mt-4 col-9">
                    <button type="submit" class="btn btn-outline-secondary px-5 mx-auto" onclick="()=>{}">Save</button>
                </div>
            </form>
        </div>
    </div>
</body>

</html>